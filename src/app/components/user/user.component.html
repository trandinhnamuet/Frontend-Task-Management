<h2>User Management</h2>

<!-- Form thêm User -->
<mat-form-field>
  <input matInput placeholder="User Name" [(ngModel)]="newUser.userName" name="newUserName" />
</mat-form-field>
<mat-form-field>
  <input matInput placeholder="Full Name" [(ngModel)]="newUser.fullName" name="newFullName" />
</mat-form-field>
<mat-form-field>
  <input matInput placeholder="Password" type="password" [(ngModel)]="newUser.password" name="newPassword" />
</mat-form-field>
<mat-form-field>
  <input matInput placeholder="Email" [(ngModel)]="newUser.email" name="newEmail" />
</mat-form-field>
<mat-form-field>
  <input matInput placeholder="Phone Number" [(ngModel)]="newUser.phoneNumber" name="newPhoneNumber" />
</mat-form-field>
<mat-form-field>
  <input matInput placeholder="Date of Birth" [(ngModel)]="newUser.dob" name="newDob" type="date" />
</mat-form-field>
<button mat-raised-button color="primary" (click)="addUser()">Add User</button>

<!-- Form cập nhật User -->
<div *ngIf="selectedUser">
  <h3>Edit User</h3>
  <mat-form-field>
    <input matInput placeholder="User Name" [(ngModel)]="selectedUser.userName" name="editUserName" />
  </mat-form-field>
  <mat-form-field>
    <input matInput placeholder="Full Name" [(ngModel)]="selectedUser.fullName" name="editFullName" />
  </mat-form-field>
  <mat-form-field>
    <input matInput placeholder="Email" [(ngModel)]="selectedUser.email" name="editEmail" />
  </mat-form-field>
  <mat-form-field>
    <input matInput placeholder="Phone Number" [(ngModel)]="selectedUser.phoneNumber" name="editPhoneNumber" />
  </mat-form-field>
  <mat-form-field>
    <input matInput placeholder="Date of Birth" [(ngModel)]="selectedUser.dob" name="editDob" type="date" />
  </mat-form-field>
  <button mat-raised-button color="accent" (click)="updateUser()">Update</button>
  <button mat-button (click)="selectedUser = null">Cancel</button>
</div>

<!-- Bảng danh sách User -->
<table mat-table [dataSource]="users" class="mat-elevation-z8">
  <!-- Cột ID -->
  <ng-container matColumnDef="userID">
    <th mat-header-cell *matHeaderCellDef> ID </th>
    <td mat-cell *matCellDef="let user"> {{ user.userID }} </td>
  </ng-container>

  <!-- Cột User Name -->
  <ng-container matColumnDef="userName">
    <th mat-header-cell *matHeaderCellDef> User Name </th>
    <td mat-cell *matCellDef="let user"> {{ user.userName }} </td>
  </ng-container>

  <!-- Cột Full Name -->
  <ng-container matColumnDef="fullName">
    <th mat-header-cell *matHeaderCellDef> Full Name </th>
    <td mat-cell *matCellDef="let user"> {{ user.fullName }} </td>
  </ng-container>

  <!-- Cột Email -->
  <ng-container matColumnDef="email">
    <th mat-header-cell *matHeaderCellDef> Email </th>
    <td mat-cell *matCellDef="let user"> {{ user.email }} </td>
  </ng-container>

  <!-- Cột Phone Number -->
  <ng-container matColumnDef="phoneNumber">
    <th mat-header-cell *matHeaderCellDef> Phone </th>
    <td mat-cell *matCellDef="let user"> {{ user.phoneNumber }} </td>
  </ng-container>

  <!-- Cột DOB -->
  <ng-container matColumnDef="dob">
    <th mat-header-cell *matHeaderCellDef> DOB </th>
    <td mat-cell *matCellDef="let user"> {{ user.dob | date: 'yyyy-MM-dd' }} </td>
  </ng-container>

  <!-- Cột Actions -->
  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef> Actions </th>
    <td mat-cell *matCellDef="let user">
      <button mat-icon-button color="primary" (click)="editUser(user)">
        <mat-icon>edit</mat-icon>
      </button>
      <button mat-icon-button color="warn" (click)="deleteUser(user.userID)">
        <mat-icon>delete</mat-icon>
      </button>
    </td>
  </ng-container>

  <!-- Header Row -->
  <tr mat-header-row *matHeaderRowDef="['userID', 'userName', 'fullName', 'email', 'phoneNumber', 'dob', 'actions']"></tr>
  
  <!-- Data Rows -->
  <tr mat-row *matRowDef="let row; columns: ['userID', 'userName', 'fullName', 'email', 'phoneNumber', 'dob', 'actions']"></tr>
</table>
